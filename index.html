<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!-- Configurações do documento -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NextGen Analytics Solutions</title>

  <!-- Link para o arquivo de estilos -->
  <link rel="stylesheet" href="styles.css">

  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BFK1J8PF6K"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    // Configuração do ID da métrica
    gtag('config', 'G-BFK1J8PF6K');
  </script>
</head>
<body>
  <!-- Contêiner do chatbot -->
  <div id="chatbot-container" class="chatbot">
      <!-- Cabeçalho do chatbot com botão de abrir/fechar -->
      <div id="chat-header" onclick="toggleChat()">🤖 Precisa de ajuda?</div>
      
      <!-- Corpo do chatbot -->
      <div id="chat-body" style="display: none;"> <!-- Inicialmente escondido -->
          <div id="chat-messages"></div> <!-- Área onde aparecem as mensagens -->
          <input id="chat-input" type="text" placeholder="Digite sua mensagem...">
          <button id="chat-send" onclick="sendMessage()">Enviar</button>
      </div>
  </div>

  <!-- JavaScript do Chatbot -->
  <script>
      // Abre ou fecha o chatbot ao clicar no cabeçalho
      function toggleChat() {
          const chatBody = document.getElementById("chat-body");
          const isOpen = chatBody.style.display === "none" ? "aberto" : "fechado";
          gtag('event', 'chat_toggle', { 'event_category': 'Chatbot', 'event_label': isOpen });
          chatBody.style.display = chatBody.style.display === "none" ? "block" : "none";
      }

      // Envia mensagem para o chatbot
      async function sendMessage() {
          const input = document.getElementById("chat-input");
          const message = input.value.trim();
          if (!message) return;

          const chatMessages = document.getElementById("chat-messages");
          chatMessages.innerHTML += `<div>Você: ${message}</div>`;
          input.value = "";

          gtag('event', 'chat_message', { 'event_category': 'Chatbot', 'event_label': 'Mensagem Enviada' });

          try {
              const response = await fetch("https://telegram-nextgen-analytics-website.onrender.com/api/chatbot", {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify({ user_message: message }),
              });
              const data = await response.json();
              chatMessages.innerHTML += `<div>Bot: ${data.response || "Desculpe, não entendi."}</div>`;
          } catch (error) {
              chatMessages.innerHTML += `<div>Bot: Ocorreu um erro ao tentar processar sua mensagem.</div>`;
              console.error("Erro ao enviar mensagem:", error);
          }

          chatMessages.scrollTop = chatMessages.scrollHeight; // Rola para a última mensagem
      }

      // Envia mensagem ao pressionar Enter
      document.getElementById("chat-input").addEventListener("keypress", function(event) {
          if (event.key === "Enter") {
              sendMessage();
              event.preventDefault();
          }
      });
  </script>

  <!-- Cabeçalho principal -->
  <header>
    <div class="container">
        <img src="images/logo.png" alt="NextGen Analytics Solutions Logo" class="banner-image" width="100" height="50">
        <h1>NextGen Analytics Solutions</h1>
        <p>Seu parceiro em transformação orientada por dados</p>
    </div>
  </header>

  <!-- Navegação principal -->
  <nav>
    <ul>
      <li><a href="index.html">🏠 Início</a></li>
      <li><a href="competency_mapping.html">📊 Mapeamento de Competências</a></li>
      <li><a href="process_optimization.html">⚙️ Otimização de Processos</a></li>
      <li><a href="data_science_consulting.html">📈 Consultoria em Ciência de Dados</a></li>
      <li><a href="machine_learning_solutions.html">🤖 Soluções de Machine Learning</a></li>
      <li><a href="generative_models.html">🌌 Modelos Transformativos Generativos</a></li>
      <li><a href="contact.html">📞 Contato</a></li>
    </ul>
  </nav>

  <!-- Conteúdo principal -->
  <main>
    <section id="about">
      <h2>Sobre Nós</h2>
      <p>
        Na <strong>NextGen Analytics Solutions</strong>, transformamos dados em estratégias poderosas.
        Combinamos o rigor do método <strong>CRISP-DM</strong> com a agilidade do <strong>Scrum</strong> para criar soluções dinâmicas e eficazes.
      </p>
    </section>

    <section id="services">
      <h2>Serviços</h2>
      <ul>
        <li><a href="competency_mapping.html">📊 Mapeamento de Competências</a></li>
        <li><a href="process_optimization.html">⚙️ Otimização de Processos</a></li>
        <li><a href="data_science_consulting.html">📈 Consultoria em Ciência de Dados</a></li>
        <li><a href="machine_learning_solutions.html">🤖 Soluções de Machine Learning</a></li>
        <li><a href="generative_models.html">🌌 Modelos Transformativos Generativos</a></li>
      </ul>
    </section>

    <section id="success-cases">
      <h2>Casos de Sucesso</h2>
      <div class="success-case">
        <h3>Projeto Coletivo Inclusão</h3>
        <p>
          Em parceria com o <strong>Coletivo Inclusão</strong>, aplicamos nossas metodologias de
          <a href="competency_mapping.html">Mapeamento de Competências</a> para promover eficiência organizacional.
        </p>
      </div>
    </section>
  </main>

  <!-- Rodapé -->
  <footer>
    <p>© 2024 NextGen Analytics Solutions. Todos os direitos reservados.</p>
    <a href="https://wa.me/5541995484812" target="_blank" class="whatsapp-button" 
       onclick="gtag('event', 'click', { 'event_category': 'Contato', 'event_label': 'WhatsApp' });">
      <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp Logo" class="whatsapp-icon">
      Fale conosco pelo WhatsApp
    </a>
  </footer>
</body>
</html>
